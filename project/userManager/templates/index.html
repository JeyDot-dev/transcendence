{% load static %}
<div>
	<h2>Log in to play</h2>
	<button type="button" class="btn btn-primary m-4" data-bs-toggle="modal" data-bs-target="#loginModal">
		Login
	</button>
	<br />
	<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#signupModal">
		Create account
	</button>
	<button type="button" onclick="logout()">
		Logout
	</button>
</div>

{% if user.is_authenticated %}
	<p>User connected</p>
	<img src="{% static user.profile_pic.url %}" alt="Profile Picture" style="width: 100px; height: 100px;" id="pp">
	<p>Username: {{ user.username }}</p>
	<p>Email: {{ user.email }}</p>

	<form id="profilePictureForm" enctype="multipart/form-data">
		{% csrf_token %}
		<input type="hidden" name="username" value={{ user.username }}>
		<input type="file" name="profile_pic" accept="image/*" required>
		<button type="submit">Upload Profile Picture</button>
	</form>
	<script>
		console.log('{{ user.profile_pic.url }}')

		{% comment %} document.getElementById('pp').src = '{{ user.profile_pic.url }}'; {% endcomment %}
		document.getElementById('profilePictureForm').addEventListener('submit', function(e) {
			e.preventDefault();
			console.log('submitting');
			var form = document.getElementById('profilePictureForm');
			var formData = new FormData(form);

			uploadProfilePicture(formData);
		});
	</script>

{% else %}
	<p>User not connected</p>
{% endif %}

{% include "accountCreation.html" %}
{% include "accountLogin.html" %}
