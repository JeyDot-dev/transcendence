<!DOCTYPE html>
<html lang="en">
<body>
    <div class="container">
        <h1>new Tournament</h1>
        <form method="post">
            {% csrf_token %}
            <div id="player-formset">
                {{ formset.management_form }}
                {% for form in formset %}
                    <div class="form-group">
                        {{ form.as_p }}
                        <button type="button" class="btn btn-danger" onclick="removePlayerForm(this)">Remove</button>
                    </div>
                {% endfor %}
            </div>
            <button type="button" class="btn btn-secondary" onclick="addPlayerForm()">Add Player</button>
            <input type="submit" class="btn btn-primary" value="Save">
        </form>
    </div>

    <script>
        function addPlayerForm() {
            var formCount = document.querySelectorAll('#player-formset .form-group').length;
            var newForm = document.querySelector('#player-formset .form-group:last-child').cloneNode(true);
            var formRegex = RegExp('form-(\\d+)-', 'g');
            newForm.innerHTML = newForm.innerHTML.replace(formRegex, 'form-' + formCount + '-');
            
            // Clear the values in the new form
            var newFormInputs = newForm.querySelectorAll('input');
            newFormInputs.forEach(function(input) {
                input.value = '';
            });
            
            document.querySelector('#player-formset').appendChild(newForm);
            document.querySelector('#id_form-TOTAL_FORMS').value = formCount + 1;
        }

        function removePlayerForm(button) {
            var formCount = document.querySelectorAll('#player-formset .form-group').length;
            if (formCount > 1) {
                var form = button.parentElement;
                form.parentElement.removeChild(form);
                document.querySelector('#id_form-TOTAL_FORMS').value = formCount - 1;
            }
        }
    </script>
</body>
</html>